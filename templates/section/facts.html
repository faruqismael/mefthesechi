{% load static %}

<div class="container-fluid bg-light py-5">
    <div class="container py-5">
        <div class="text-center mb-5">
            <h2 class="section-title">Our Impact</h2>
        </div>
        <div class="row">
            {% for fact in facts %}
            <div class="col-lg-3 col-sm-6 mb-4">
                <div class="fact-item text-center">
                    <i class="fa {{ fact.icon_class }} fa-3x text-primary mb-4"></i>
                    <h4 class="fact-title">{{ fact.title }}</h4>
                    {% if fact.number %}
                    <!-- Add an ID attribute to target with JavaScript -->
                    
                    <p class="facts-plus">+<span class="facts-plus fact-number" id="fact{{ forloop.counter }}" data-target="{{fact.number}}">0</span></p>
                    <!-- <p class="facts-plus" id="fact-{{ forloop.counter }}">+{{ fact.number }} {{ forloop.counter }}</p> -->
                    {% endif %}
                    {% if fact.description %}
                    <p>{{ fact.description }}</p>
                    {% endif %}
                </div>
            </div>
            {% endfor %}

        </div>

    </div>
</div>
<style>
    .fact-item .facts-plus {
        font-size: 2em;
        font-weight: bold;
        color: #7ab730; /* Primary color */
    }
    .fact-title {
        font-size: 1.25em;
        margin-bottom: 15px;
    }
    .section-title {
        font-size: 2em;
        margin-bottom: 0.75em;
    }
</style>

<script>
    function animateValue(obj, start, end, duration) {
        let startTimestamp = null;
        const step = (timestamp) => {
            if (!startTimestamp) startTimestamp = timestamp;
            const progress = Math.min((timestamp - startTimestamp) / duration, 1);
            obj.innerHTML = Math.floor(progress * (end - start) + start);
            if (progress < 1) {
                window.requestAnimationFrame(step);
            }
        };
        window.requestAnimationFrame(step);
    }
    
    document.addEventListener('DOMContentLoaded', () => {
        const counters = document.querySelectorAll('.fact-number');
        counters.forEach(counter => {
            animateValue(counter, 0, parseInt(counter.getAttribute('data-target')), 2000);
        });
    });
    </script>
    
    